<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcolatore prestito</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
</head>
<body class="dark-theme">
    <div class="theme-toggle">
        <span id="light-mode-icon" class="theme-icon">ðŸŒž</span>
        <span id="dark-mode-icon" class="theme-icon">ðŸŒ™</span>
    </div>
    <div class="container">
        <h1>Calcolatore prestito</h1>
        <div class="input-container">
            <label for="calculation-mode">Seleziona il tipo di calcolo:</label>
            <select id="calculation-mode">
                <option value="calculate-rate">Calcolo dell'importo della rata</option>
                <option value="calculate-tan-taeg">Calcolo di TAN e TAEG</option>
            </select>
        </div>

        <!-- Sezione per calcolare l'importo delle rate -->
        <div id="rate-calculation-section">
            <div class="input-container">
                <label for="loan-amount-rate">Importo totale del prestito (â‚¬):</label>
                <input type="number" id="loan-amount-rate" placeholder="Inserisci l'importo totale">
            </div>
            <div class="input-container">
                <label for="loan-duration-rate">Durata del prestito (mesi):</label>
                <input type="number" id="loan-duration-rate" placeholder="Inserisci la durata in mesi">
            </div>
            <div class="input-container">
                <label for="tan-rate">TAN (%):</label>
                <input type="number" id="tan-rate" placeholder="Inserisci il TAN">
            </div>
            <div class="input-container">
                <label for="taeg-rate">TAEG (%):</label>
                <input type="number" id="taeg-rate" placeholder="Inserisci il TAEG">
            </div>
            <button id="calculate-rate-btn" class="btn">Calcola Importo Rate</button>
        </div>

        <!-- Sezione per calcolare TAN e TAEG a partire dalla rata -->
        <div id="tan-taeg-calculation-section" style="display: none;">
            <div class="input-container">
                <label for="loan-amount">Importo totale del prestito (â‚¬):</label>
                <input type="number" id="loan-amount" placeholder="Inserisci l'importo totale">
            </div>
            <div class="input-container">
                <label for="monthly-payment">Importo rata (â‚¬):</label>
                <input type="number" id="monthly-payment" placeholder="Inserisci l'importo della rata">
            </div>
            <div class="input-container">
                <label>
                    <input type="checkbox" id="different-first-payment"> La prima rata Ã¨ diversa
                </label>
            </div>
            <div class="input-container" id="first-payment-container" style="display: none;">
                <label for="first-payment">Importo della prima rata (â‚¬):</label>
                <input type="number" id="first-payment" placeholder="Inserisci l'importo della prima rata">
            </div>
            <div class="input-container">
                <label for="loan-duration">Durata del prestito (mesi):</label>
                <input type="number" id="loan-duration" placeholder="Inserisci la durata in mesi">
            </div>
            <div class="input-container">
                <label for="accessory-fees">Spese Accessorie (â‚¬):</label>
                <input type="number" id="accessory-fees" placeholder="Inserisci le spese accessorie" value="0">
            </div>
            <button id="calculate-btn" class="btn">Calcola TAN e TAEG</button>
        </div>

        <!-- Risultati per entrambe le modalitÃ  -->
        <div id="results" style="display: none;">
            <h2>Risultati</h2>
            <p id="rate-result" style="display: none;">Importo della rata: <span id="calculated-rate"></span> â‚¬</p>
            <p id="tan-result">TAN: <span id="tan"></span>%</p>
            <p id="taeg-result">TAEG: <span id="taeg"></span>%</p>
            <h3>Piano di Ammortamento</h3>
            <div class="table-container">
                <div class="table-container">
                    <table id="amortization-schedule">
                        <thead>
                            <tr>
                                <th>Mese</th>
                                <th>Capitale Pagato (â‚¬)</th>
                                <th>Interessi Pagati (â‚¬)</th>
                                <th>Capitale Totale Pagato (â‚¬)</th>
                                <th>Interessi Totali Pagati (â‚¬)</th>
                                <th>Capitale Residuo (â‚¬)</th>
                                <th>Interessi Residui (â‚¬)</th>
                                <th>Rata (â‚¬)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- I risultati saranno inseriti qui con JavaScript -->
                        </tbody>
                        <tfoot>
                            <tr>
                                <th>Mese</th>
                                <th>Capitale Pagato (â‚¬)</th>
                                <th>Interessi Pagati (â‚¬)</th>
                                <th>Capitale Totale Pagato (â‚¬)</th>
                                <th>Interessi Totali Pagati (â‚¬)</th>
                                <th>Capitale Residuo (â‚¬)</th>
                                <th>Interessi Residui (â‚¬)</th>
                                <th>Rata (â‚¬)</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>                
            </div>
        <button id="download-excel-btn" style="display:none;">Scarica Excel</button>
    </div>
    <script src="script.js"></script>
</body>
</html>

